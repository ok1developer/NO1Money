<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>NO1Money+ Mobile Banking</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <style>
        /* --- Import Custom Font --- */
        @font-face { font-family: 'LINESeedSansTH'; src: url('https://cdn.glitch.global/47bd20a5-ea68-4eee-b852-538d3eb2c0a4/LINESeedSansTH_W_Rg.woff?v=1729614138182') format('woff'); font-weight: normal; }
        @font-face { font-family: 'LINESeedSansTH'; src: url('https://cdn.glitch.global/47bd20a5-ea68-4eee-b852-538d3eb2c0a4/LINESeedSansTH_W_Bd.woff?v=1731156180172') format('woff'); font-weight: bold; }
        /* --- Reset and Basic Styles --- */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html { scroll-behavior: smooth; height: 100%; }
        body { font-family: 'LINESeedSansTH', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f8f9fd; color: #1e1e1e; font-size: 16px; line-height: 1.5; font-weight: normal; position: relative; height: 100%; overflow: hidden; }
        body.modal-open { overflow: hidden; }

        /* --- PIN Code Screen Styles --- */
        #pinScreen { position: fixed; inset: 0; background-color: #f8f9fd; z-index: 10001; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 2vh 20px; opacity: 1; visibility: visible; transition: opacity 0.4s ease-out, visibility 0s linear 0s; height: 100%; max-height: 100vh; overflow: hidden; }
        #pinScreen.hidden { opacity: 0; visibility: hidden; transition: opacity 0.4s ease-out, visibility 0s linear 0.4s; pointer-events: none; }
        .pin-header-area { width: 100%; display: flex; flex-direction: column; align-items: center; margin-bottom: 3vh; flex-shrink: 0; }
        .pin-user-info { text-align: center; margin-bottom: 1.5vh; }
        .pin-user-info img { width: clamp(70px, 16vw, 80px); height: clamp(70px, 16vw, 80px); border-radius: 50%; object-fit: cover; margin-bottom: 1vh; border: 3px solid rgba(79, 53, 208, 0.2); display: block; margin-left: auto; margin-right: auto; }
        .pin-user-info h2 { font-size: clamp(1.1em, 4vw, 1.3em); font-weight: bold; color: #1e1e1e; }
        #pinStatusMessage { font-size: clamp(0.85em, 3vw, 0.95em); color: #555; margin-bottom: 2vh; min-height: 1.5em; transition: color 0.3s ease; text-align: center; }
        #pinStatusMessage.error { color: #e74c3c; font-weight: bold; }
        #pinStatusMessage.success { color: #2ecc71; font-weight: bold; }
        .pin-dots-container { display: flex; gap: 15px; margin-bottom: 2.5vh; justify-content: center; flex-shrink: 0; }
        .pin-dot { width: 14px; height: 14px; border: 2px solid #ccc; border-radius: 50%; background-color: transparent; transition: background-color 0.2s ease, border-color 0.2s ease; }
        .pin-dot.active { background-color: var(--dynamic-primary-color, #4f35d0); border-color: var(--dynamic-primary-color, #4f35d0); }
        .pin-dots-container.shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
        .pin-keypad-area { width: 100%; display: flex; flex-direction: column; align-items: center; flex-shrink: 0; }
        .pin-keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: clamp(12px, 3vw, 18px); width: 100%; max-width: 300px; margin-bottom: 2vh; }
        .pin-key { font-family: 'LINESeedSansTH', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: rgba(0, 0, 0, 0.05); color: #1e1e1e; border: none; border-radius: 50%; aspect-ratio: 1 / 1; width: clamp(65px, 18vw, 70px); height: auto; font-size: clamp(1.6em, 6vw, 1.9em); font-weight: normal; cursor: pointer; transition: background-color 0.2s ease, transform 0.1s ease; position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; padding-top: 5px; line-height: 1; -webkit-touch-callout: none; user-select: none; touch-action: manipulation; } /* Added touch-action */
        .pin-key:active { background-color: rgba(0, 0, 0, 0.15); transform: translateY(1px); }
        .pin-key .key-letters { font-size: clamp(0.35em, 1.5vw, 0.4em); font-weight: bold; color: #555; text-transform: uppercase; position: absolute; bottom: 15%; letter-spacing: 1px; pointer-events: none; }
        .pin-key.utility { background-color: transparent; font-size: clamp(1.3em, 5vw, 1.5em); touch-action: manipulation; } /* Added touch-action */
        .pin-key.utility:active { background-color: rgba(0, 0, 0, 0.05); transform: translateY(1px); }
        .pin-key[data-value="0"] { grid-column: 2 / 3; }
        #pinDeleteKey { grid-column: 3 / 4; grid-row: 4 / 5; color: #555; }
        .pin-key.empty { grid-column: 1 / 2; grid-row: 4 / 5; background-color: transparent; pointer-events: none; }
        .pin-actions { margin-top: 1vh; flex-shrink: 0; }
        #pinForgotLink { color: var(--dynamic-primary-color, #4f35d0); font-size: clamp(0.85em, 3vw, 0.9em); font-weight: bold; text-decoration: none; transition: color 0.3s ease; }
        #pinForgotLink:hover { color: var(--dynamic-secondary-color, #6b48e0); }
        /* Dark Mode PIN */
        body.dark-mode #pinScreen { background-color: #121212; } body.dark-mode .pin-user-info h2 { color: #e0e0e0; } body.dark-mode .pin-user-info img { border-color: rgba(131, 111, 255, 0.3); } body.dark-mode #pinStatusMessage { color: #bbb; } body.dark-mode #pinStatusMessage.error { color: #f1948a; } body.dark-mode #pinStatusMessage.success { color: #58d68d; } body.dark-mode .pin-dot { border-color: #555; } body.dark-mode .pin-dot.active { background-color: var(--dynamic-primary-color-dark, #836fff); border-color: var(--dynamic-primary-color-dark, #836fff); } body.dark-mode .pin-key { background-color: rgba(255, 255, 255, 0.1); color: #e0e0e0; } body.dark-mode .pin-key:active { background-color: rgba(255, 255, 255, 0.2); } body.dark-mode .pin-key .key-letters { color: #888; } body.dark-mode .pin-key.utility { background-color: transparent; } body.dark-mode .pin-key.utility:active { background-color: rgba(255, 255, 255, 0.1); } body.dark-mode #pinDeleteKey { color: #aaa; } body.dark-mode #pinForgotLink { color: var(--dynamic-primary-color-dark, #836fff); } body.dark-mode #pinForgotLink:hover { color: var(--dynamic-secondary-color-dark, #a391ff); }

        /* --- Loading Overlay --- */
        .loading-overlay { position: fixed; inset: 0; background-color: rgba(248, 249, 253, 0.95); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 9999; opacity: 0; visibility: hidden; transition: opacity 0.4s ease-out, visibility 0s linear 0.4s; }
        .loading-overlay.active { opacity: 1; visibility: visible; transition: opacity 0.4s ease-out, visibility 0s linear 0s; }
        .loading-animation { width: 120px; height: 120px; }
        .loading-text { margin-top: 20px; font-size: 1.1em; color: #555; font-weight: bold; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 0.6; } 50% { opacity: 1; } }

        /* --- App Container --- */
        .app-container { max-width: 100%; margin: 0 auto; background-color: #f8f9fd; min-height: 100vh; position: relative; overflow-x: hidden; opacity: 0; visibility: hidden; transition: opacity 0.5s ease 0.2s, visibility 0s linear 0.7s; }
        .app-container.visible { opacity: 1; visibility: visible; transition: opacity 0.5s ease, visibility 0s linear 0s; }

        /* --- Header --- */
        .app-header { background: var(--dynamic-gradient, linear-gradient(135deg, #4f35d0 0%, #6b48e0 100%)); background-attachment: fixed; background-position: center; background-repeat: no-repeat; background-size: cover; color: white; padding: 10px 15px 85px 15px; border-bottom-left-radius: 30px; border-bottom-right-radius: 30px; position: relative; z-index: 1; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); transition: background-color 0.8s ease, border-radius 0.5s ease; overflow: hidden; }
        .header-top { display: flex; justify-content: space-between; align-items: center; position: relative; height: 50px; margin-bottom: 15px; }
        .header-user-avatar { position: relative; flex-shrink: 0; margin-right: 10px; transition: transform 0.2s ease;}
        .header-user-avatar:hover { transform: scale(1.05); }
        .header-user-avatar img { width: 45px; height: 45px; border-radius: 50%; object-fit: cover; border: 2px solid rgba(255, 255, 255, 0.4); cursor: pointer; display: block; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); }
        .header-user-avatar::after { content: ''; position: absolute; bottom: 0px; right: 0px; width: 12px; height: 12px; background-color: #2ecc71; border-radius: 50%; border: 2px solid var(--dynamic-primary-color, #4f35d0); box-sizing: content-box; transition: border-color 0.8s ease, transform 0.3s ease; }
        .header-center-logo { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); height: 30px; transition: transform 0.3s ease; }
        .header-center-logo img { height: 100%; width: auto; object-fit: contain; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2)); }
        .header-right-actions { display: flex; align-items: center; }
        .header-right-actions .header-icon { position: relative; margin-left: 20px; cursor: pointer; transition: transform 0.2s ease; color: white; }
        .header-right-actions .header-icon i { font-size: 1.4em; text-shadow: 0 1px 3px rgba(0,0,0,0.2)); display: block; }
        .header-right-actions .header-icon:hover { transform: translateY(-3px); }
        .notification-badge { position: absolute; top: -6px; right: -8px; background-color: #ff4757; color: white; border-radius: 50%; min-width: 18px; height: 18px; padding: 0 4px; display: none; align-items: center; justify-content: center; font-size: 0.65em; font-weight: bold; line-height: 1; box-shadow: 0 2px 4px rgba(0,0,0,0.2)); border: 1px solid rgba(255,255,255,0.3); }
        .badge-animate { animation: heartBeat 1.5s ease-in-out 0.5s infinite, float 3s ease-in-out 0.5s infinite; }
        @keyframes heartBeat { 0%, 70%, 100% { transform: scale(1); } 14%, 42% { transform: scale(1.3); } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        .badge-no-animate { animation: none !important; }
        .user-greeting-container { text-align: center; margin-top: 10px; position: relative; z-index: 1; }
        .user-greeting-container p#greeting { font-size: 0.9em; opacity: 0.85; margin: 0 0 2px 0; line-height: 1.3; font-weight: normal; }
        .user-greeting-container h1 { font-size: 1.6em; font-weight: bold; margin: 0; line-height: 1.2; text-shadow: 0 2px 4px rgba(0,0,0,0.15); margin-bottom: 5px; }
        .membership-id { display: inline-flex; align-items: center; font-size: 0.8em; font-weight: normal; color: rgba(255, 255, 255, 0.85); opacity: 0.9; letter-spacing: 0.5px; background: rgba(0,0,0,0.1); padding: 4px 10px; border-radius: 15px; transition: transform 0.2s ease; }
        .membership-id:hover { transform: scale(1.05); }
        .membership-id i { margin-right: 6px; font-size: 1.1em; opacity: 0.8; }

        /* --- Main Content Area --- */
        .main-content { padding: 0 15px; margin-top: -65px; position: relative; z-index: 2; padding-bottom: 90px; }

        /* --- Balance Card --- */
        .balance-card { background-color: white; border-radius: 20px; padding: 20px; margin-bottom: 20px; box-shadow: 0 6px 25px rgba(79, 53, 208, 0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; position: relative; overflow: hidden; border: 1px solid rgba(0,0,0,0.05); }
        .balance-card:hover { transform: translateY(-4px); box-shadow: 0 10px 28px rgba(79, 53, 208, 0.12); }
        .balance-info { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; position: relative; flex-wrap: wrap; gap: 10px; }
        .balance-details { flex-grow: 1; min-width: 150px; }
        .balance-details .title-row { display: flex; align-items: center; margin-bottom: 4px; }
        .balance-details .title { font-size: 0.95em; color: #666; margin-right: 8px; font-weight: normal; }
        .balance-visibility-toggle { font-size: 1em; color: #aaa; cursor: pointer; transition: color 0.2s ease, transform 0.2s ease; }
        .balance-visibility-toggle:hover { transform: scale(1.1); color: #555;}
        .balance-details .amount-container { display: flex; align-items: baseline; }
        .balance-details .amount { font-size: 1.9em; font-weight: bold; color: #1e1e1e; line-height: 1.1; position: relative; display: inline-block; }
        .balance-details .amount .hidden-placeholder { display: none; font-weight: bold; letter-spacing: 2px; }
        .balance-details .amount::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 50px; height: 3px; background: var(--dynamic-gradient, linear-gradient(90deg, #4f35d0, #6b48e0)); border-radius: 3px; transition: width 0.3s ease, background 0.8s ease; }
        .balance-details .amount.hidden::after { width: 30px; }
        .reward-details { text-align: right; margin-left: 10px; padding-top: 2px; flex-shrink: 0; }
        .reward-details .title { font-size: 0.95em; color: #666; margin-bottom: 4px; font-weight: normal; }
        .reward-details .points { font-size: 1.4em; font-weight: bold; color: #1e1e1e; line-height: 1.1; display: flex; align-items: center; justify-content: flex-end; }
        .reward-details .points i.fa-gift { color: #f39c12; margin-right: 6px; font-size: 1.1em; filter: drop-shadow(0 2px 4px rgba(243, 156, 18, 0.3)); animation: swing 2s ease-in-out infinite; }
        @keyframes swing { 0%, 100% { transform: rotate(-10deg); } 50% { transform: rotate(10deg); } }
        .card-separator { border-top: 1px solid #eee; margin: 20px -20px; position: relative; }
        .card-separator::after { content: ''; position: absolute; top: -1px; left: 50%; transform: translateX(-50%); width: 50px; height: 2px; background: var(--dynamic-gradient, linear-gradient(90deg, #4f35d0, #6b48e0)); border-radius: 2px; }

        /* --- Quick Actions (Updated) --- */
        .quick-actions { display: flex; justify-content: space-around; align-items: center; text-align: center; flex-wrap: wrap; gap: 5px; }
        .action-item { display: flex; flex-direction: column; align-items: center; flex: 1 1 80px; cursor: pointer; transition: transform 0.2s ease; padding: 8px 0; border-radius: 10px; min-width: 70px; position: relative; overflow: visible; }
        .action-item:hover { transform: translateY(-4px); }
        .action-item .icon { width: 50px; height: 50px; margin-bottom: 8px; background-color: rgba(79, 53, 208, 0.1); border-radius: 15px; display: flex; justify-content: center; align-items: center; font-size: 1.6em; transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease; position: relative; z-index: 1; }
        .action-item:hover .icon { transform: scale(1.1) translateY(-2px); box-shadow: 0 6px 12px rgba(79, 53, 208, 0.2); background-color: white; }
        .action-item[data-action="pay-bill"] .icon { color: #3498db; background-color: rgba(52, 152, 219, 0.1); }
        .action-item[data-action="postpone"] .icon { color: #1abc9c; background-color: rgba(26, 188, 156, 0.1); }
        .action-item[data-action="pay-off"] .icon { color: #2ecc71; background-color: rgba(46, 204, 113, 0.1); }
        .action-item[data-action="qr"] .icon { color: #9b59b6; background-color: rgba(155, 89, 182, 0.1); }
        .action-item span { font-size: 0.8em; color: #555; font-weight: normal; text-align: center; position: relative; z-index: 1; transition: color 0.3s ease; }
        .action-item:hover span { color: var(--dynamic-primary-color, #4f35d0); font-weight: bold;}

        /* --- Banner Carousel --- */
        .banner-carousel { margin-bottom: 25px; margin-top: 5px; position: relative; overflow: hidden; border-radius: 15px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }
        .bannerSwiper { width: 100%; height: auto; }
        .swiper-slide a { display: block; text-decoration: none; transition: transform 0.2s ease; }
        .swiper-slide a:active { transform: scale(0.98); }
        .swiper-slide img { display: block; width: 100%; height: 140px; object-fit: cover; transition: transform 0.4s ease;}
        .swiper-slide a:hover img { transform: scale(1.03); }
        .swiper-pagination { position: absolute; bottom: 10px !important; left: 50% !important; transform: translateX(-50%) !important; width: auto !important; }
        .swiper-pagination-bullet { background-color: rgba(255, 255, 255, 0.7); opacity: 1; transition: all 0.3s ease; margin: 0 4px !important; box-shadow: 0 0 2px rgba(0,0,0,0.3); }
        .swiper-pagination-bullet-active { background-color: var(--dynamic-primary-color, #ffffff); transform: scale(1.2); }
        body.dark-mode .swiper-pagination-bullet { background-color: rgba(0, 0, 0, 0.5); box-shadow: none; }
        body.dark-mode .swiper-pagination-bullet-active { background-color: var(--dynamic-primary-color-dark, #836fff); }

        /* --- Section Title --- */
        .section { margin-top: 25px; margin-bottom: 15px; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .section-header h2 { font-size: 1.25em; font-weight: bold; color: #1e1e1e; position: relative; padding-left: 15px; }
        .section-header h2::before { content: ''; position: absolute; left: 0; top: 50%; transform: translateY(-50%); width: 5px; height: 20px; background: var(--dynamic-gradient, linear-gradient(to bottom, #4f35d0, #6b48e0)); border-radius: 5px; transition: background 0.8s ease; }
        .section-header .view-all { font-size: 0.9em; color: var(--dynamic-secondary-color, #f39c12); font-weight: bold; transition: color 0.3s ease, transform 0.2s ease; display: flex; align-items: center; position: relative; padding-right: 15px; }
        .section-header .view-all:hover { color: var(--dynamic-primary-color, #e67e22); transform: translateX(3px); }
        .section-header .view-all i { margin-left: 5px; font-size: 0.8em; transition: transform 0.2s ease; }
        .section-header .view-all:hover i { transform: translateX(2px); }

        /* --- Your Service Grid (Added Items) --- */
        .service-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
        .service-item { background-color: #ffffff; border-radius: 15px; padding: 15px 5px; text-align: center; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05); cursor: pointer; transition: transform 0.25s ease, box-shadow 0.25s ease; position: relative; overflow: hidden; min-height: 100px; display: flex; flex-direction: column; justify-content: center; align-items: center; border: 1px solid #f0f0f0; }
        .service-item:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 8px 22px rgba(0, 0, 0, 0.09); }
        .service-item::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: var(--dynamic-gradient, linear-gradient(90deg, #4f35d0, #6b48e0)); transform: scaleX(0); transform-origin: center; transition: transform 0.4s ease, background 0.8s ease; }
        .service-item:hover::after { transform: scaleX(0.6); }
        .service-item .icon-wrapper { width: 40px; height: 40px; margin-bottom: 10px; display: flex; justify-content: center; align-items: center; transition: transform 0.3s ease; position: relative; }
        .service-item .icon-wrapper i { font-size: 1.6em; position: relative; z-index: 1; transition: color 0.3s ease; }
        .service-item:hover .icon-wrapper { transform: scale(1.15); }
        .service-item:hover .icon-wrapper i { color: var(--dynamic-primary-color, #4f35d0); }
        /* Base Colors */
        .service-item[data-service="contract"] i { color: #5f27cd; } .service-item[data-service="installment"] i { color: #f39c12; } .service-item[data-service="refinance"] i { color: #3498db; } .service-item[data-service="pawn-phone"] i { color: #2ecc71; } .service-item[data-service="sell-phone"] i { color: #e74c3c; } .service-item[data-service="pawn-icloud"] i { color: #9b59b6; } .service-item[data-service="save-down"] i { color: #1abc9c; } .service-item[data-service="new-item"] i { color: #f1c40f; } .service-item[data-service="rent-phone"] i { color: #e67e22; }
        .service-item[data-service="renew-contract"] i { color: #27ae60; } /* Added */
        .service-item[data-service="payment-history"] i { color: #8e44ad; } /* Added */
        .service-item[data-service="settings"] i { color: #7f8c8d; }      /* Added */
        .service-item span { font-size: 0.8em; color: #333; font-weight: normal; display: block; line-height: 1.3; transition: color 0.3s ease; padding: 0 3px; position: relative; z-index: 1; }
        .service-item:hover span { color: var(--dynamic-primary-color, #4f35d0); font-weight: bold; }

        /* --- News & Announcements Section --- */
        .news-section { margin-bottom: 25px; }
        .news-item { background-color: white; border-radius: 15px; padding: 15px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05); transition: transform 0.3s ease, box-shadow 0.3s ease; border: 1px solid #f0f0f0; display: flex; flex-direction: column; }
        .news-item:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1); }
        .news-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .news-title { font-weight: bold; color: #1e1e1e; font-size: 1em; display: flex; align-items: center; }
        .news-title i { margin-right: 8px; color: #f39c12; }
        .news-date { font-size: 0.75em; color: #888; }
        .news-content { font-size: 0.9em; color: #555; line-height: 1.5; }
        .news-read-more { margin-top: 10px; font-size: 0.8em; color: var(--dynamic-primary-color, #4f35d0); font-weight: bold; align-self: flex-end; transition: color 0.3s ease, transform 0.2s ease; }
        .news-read-more:hover { color: var(--dynamic-secondary-color, #6b48e0); transform: translateX(3px); }

        /* --- Featured Products Section --- */
        .featured-products { margin-bottom: 25px; overflow: hidden; }
        .product-list { display: flex; overflow-x: auto; overflow-y: hidden; padding: 10px 0 15px 0; gap: 15px; -webkit-overflow-scrolling: touch; scrollbar-width: thin; scrollbar-color: #ccc #f0f0f0; }
        .product-list::-webkit-scrollbar { height: 6px; } .product-list::-webkit-scrollbar-track { background: #f0f0f0; border-radius: 3px; } .product-list::-webkit-scrollbar-thumb { background-color: #ccc; border-radius: 3px; }
        .product-item { flex: 0 0 auto; width: clamp(140px, 35vw, 160px); background-color: #ffffff; border-radius: 15px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06); overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer; display: flex; flex-direction: column; border: 1px solid #f0f0f0; }
        .product-item:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12); }
        .product-image { height: clamp(120px, 30vw, 140px); background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; border-bottom: 1px solid #eee; overflow: hidden; position: relative; }
        .product-image img { width: 100%; height: 100%; object-fit: contain; transition: transform 0.3s ease; position: relative; z-index: 1; }
        .product-item:hover .product-image img { transform: scale(1.05); }
        .product-details { padding: 12px; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .product-name { font-size: 0.9em; font-weight: bold; color: #333; margin-bottom: 5px; line-height: 1.3; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis; min-height: 2.6em; transition: color 0.3s ease; }
        .product-item:hover .product-name { color: var(--dynamic-primary-color, #4f35d0); }
        .product-installment { font-size: 0.85em; color: #555; margin-bottom: 8px; }
        .product-installment strong { color: var(--dynamic-primary-color, #4f35d0); font-weight: bold; transition: color 0.8s ease; }
        .product-action { margin-top: auto; }
        .product-action .details-btn { display: inline-block; font-size: 0.75em; color: #ffffff; background: var(--dynamic-gradient, linear-gradient(90deg, #4f35d0, #6b48e0)); padding: 5px 12px; border-radius: 20px; text-align: center; font-weight: bold; transition: background 0.3s ease, transform 0.2s ease; }
        .product-action .details-btn:hover { background: linear-gradient(90deg, var(--dynamic-secondary-color, #6b48e0), var(--dynamic-primary-color, #4f35d0)); transform: scale(1.05); }

        /* --- Enhanced Bottom Navigation --- */
        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; max-width: 100%; background-color: #ffffff; display: flex; justify-content: space-around; align-items: stretch; height: 80px; box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.1); z-index: 1000; border-top: 1px solid #f0f0f0; border-radius: 25px 25px 0 0; overflow: hidden; }
        .nav-item { display: flex; flex-direction: column; align-items: center; justify-content: center; flex: 1; color: #a0a0a0; text-decoration: none; padding: 8px 2px; transition: color 0.3s ease, transform 0.15s ease; cursor: pointer; position: relative; text-align: center; overflow: hidden; }
        .nav-item i { font-size: 1.5em; margin-bottom: 4px; line-height: 1; transition: transform 0.3s ease, color 0.3s ease; position: relative; z-index: 1; }
        .nav-item span { font-size: 0.7em; font-weight: normal; line-height: 1.2; transition: color 0.3s ease; white-space: nowrap; position: relative; z-index: 1; }
        .nav-item.active { color: var(--dynamic-primary-color, #4f35d0); background: linear-gradient(to top, rgba(79, 53, 208, 0.05), transparent); }
        .nav-item.active i { color: var(--dynamic-primary-color, #4f35d0); transform: translateY(-5px) scale(1.1); }
        .nav-item:hover i { transform: translateY(-5px); color: var(--dynamic-primary-color, #4f35d0);}
        .nav-item:hover span { color: var(--dynamic-primary-color, #4f35d0); }
        .nav-item::after { content: ''; position: absolute; top: -1px; left: 50%; transform: translateX(-50%); width: 0; height: 3px; background: var(--dynamic-gradient, linear-gradient(90deg, #4f35d0, #6b48e0)); border-radius: 3px; transition: width 0.3s ease, background 0.8s ease; }
        .nav-item.active::after { width: 25px; }
        .nav-item.active::before { content: ''; position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); width: 8px; height: 8px; background-color: var(--dynamic-primary-color, #4f35d0); border-radius: 50%; opacity: 1; animation: bubble 1.5s infinite; }
        @keyframes bubble { 0%, 100% { transform: translateX(-50%) scale(1); opacity: 1; } 50% { transform: translateX(-50%) scale(1.3); opacity: 0.7; } }

        /* --- Modal Styles --- */
        .modal-overlay { position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.65); display: flex; align-items: center; justify-content: center; z-index: 2000; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0s linear 0.3s; backdrop-filter: blur(5px); }
        .modal-overlay.active { opacity: 1; visibility: visible; transition: opacity 0.3s ease, visibility 0s linear 0s; }
        .modal-content { background-color: #fdfdff; padding: 0; border-radius: 20px; box-shadow: 0 10px 35px rgba(0,0,0,0.2); max-width: 90%; width: 420px; max-height: 85vh; display: flex; flex-direction: column; overflow: hidden; border: 1px solid rgba(0,0,0,0.05); transform: scale(0.95) translateY(10px); transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.3s ease; opacity: 0; }
        .modal-overlay.active .modal-content { transform: scale(1) translateY(0); opacity: 1;}
        .modal-header { display: flex; justify-content: space-between; align-items: center; padding: 18px 25px; background: var(--dynamic-gradient, linear-gradient(135deg, #4f35d0, #6b48e0)); color: white; flex-shrink: 0; transition: background 0.8s ease; position: relative; overflow: hidden; }
        .modal-header h3 { font-size: 1.3em; font-weight: bold; margin: 0; text-shadow: 0 1px 2px rgba(0,0,0,0.2)); position: relative; z-index: 1; }
        .modal-close-btn { font-size: 1.8em; color: rgba(255, 255, 255, 0.8); cursor: pointer; background: none; border: none; padding: 0 5px; line-height: 1; transition: color 0.2s ease, transform 0.15s ease; text-shadow: 0 1px 2px rgba(0,0,0,0.2)); position: relative; z-index: 1; }
        .modal-tabs { display: flex; background-color: #fff; border-bottom: 1px solid #eee; flex-shrink: 0; padding: 0 15px; }
        .modal-tab-btn { flex: 1; padding: 14px 10px; font-size: 0.9em; font-weight: normal; color: #666; background: none; border: none; border-bottom: 3px solid transparent; cursor: pointer; text-align: center; transition: color 0.2s ease, border-color 0.2s ease, background-color 0.2s ease, transform 0.15s ease; white-space: nowrap; position: relative; }
        .modal-tab-btn.active { color: var(--dynamic-primary-color, #4f35d0); font-weight: bold; border-bottom-color: var(--dynamic-primary-color, #4f35d0); }
        .modal-body { overflow-y: auto; flex-grow: 1; padding: 15px 20px; background-color: #fdfdff; }
        .modal-tab-content { display: none; animation: fadeIn 0.5s ease; }
        .modal-tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .modal-body ul { list-style: none; padding: 0; margin: 0; }
        .modal-body li { padding: 15px 5px; border-bottom: 1px solid #f0f0f0; font-size: 0.95em; transition: background-color 0.2s ease; border-radius: 8px; margin-bottom: 8px; }
        .modal-body li:last-child { border-bottom: none; margin-bottom: 0; }
        .modal-body .transaction-item, .modal-body .promotion-item { display: flex; align-items: center; gap: 15px; }
        .modal-body .item-icon { font-size: 1.5em; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; border-radius: 10px; flex-shrink: 0; }
        .modal-body #transactions-content .item-icon i.fa-arrow-down { color: #2ecc71; } .modal-body #transactions-content .item-icon i.fa-arrow-up { color: #e74c3c; }
        .modal-body #user-promos-content .item-icon { color: var(--dynamic-secondary-color, #f39c12); }
        .modal-body .item-details { flex-grow: 1; overflow: hidden; }
        .modal-body .item-title { font-weight: bold; color: #333; margin-bottom: 3px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .modal-body .item-description { font-size: 0.85em; color: #777; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .modal-body .item-amount { font-weight: bold; white-space: nowrap; font-size: 0.95em; }
        .modal-body .item-amount.income { color: #2ecc71; } .modal-body .item-amount.outcome { color: #e74c3c; }
        #promotionModalOverlay .item-icon { font-size: 1.5em; width: 30px; text-align: center; flex-shrink: 0; }

        /* --- Effects & Extras --- */
        .confetti { position: absolute; width: 10px; height: 10px; background-color: #f00; opacity: 0; pointer-events: none; z-index: 10002; }
        .hover-grow:hover { transform: scale(1.05); }
        .active-touch { transform: translateY(2px) !important; }
        .action-item, .service-item, .nav-item, .header-icon, .balance-visibility-toggle, .news-read-more, .view-all, .product-action .details-btn, .swiper-slide a, .modal-close-btn, .modal-tab-btn { transition: transform 0.15s ease, opacity 0.15s ease, background-color 0.2s ease, color 0.2s ease, box-shadow 0.25s ease; }

        /* --- Custom Scrollbar --- */
        body::-webkit-scrollbar { width: 6px; height: 6px; } body::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; } body::-webkit-scrollbar-thumb { background: #888; border-radius: 10px; }
        body.dark-mode::-webkit-scrollbar-track { background: #2a2a2a; } body.dark-mode::-webkit-scrollbar-thumb { background: #555; }

        /* --- Responsive Adjustments --- */
        @media (max-width: 480px) {
            .balance-details .amount { font-size: 1.7em; } .reward-details .points { font-size: 1.3em; } .action-item { flex-basis: 75px; min-width: 65px; } .action-item .icon { width: 45px; height: 45px; font-size: 1.4em; } .service-grid { gap: 10px; } .service-item { min-height: 90px; padding: 12px 5px; } .service-item .icon-wrapper { width: 35px; height: 35px; margin-bottom: 8px; } .service-item .icon-wrapper i { font-size: 1.4em; } .service-item span { font-size: 0.7em; } .product-name { font-size: 0.85em; } .product-installment { font-size: 0.8em; } .header-center-logo { height: 25px; } .header-user-avatar img { width: 40px; height: 40px; } .header-user-avatar::after { width: 10px; height: 10px; bottom: -1px; right: -1px; } .header-right-actions .header-icon { margin-left: 15px; i { font-size: 1.3em; } } .user-greeting-container h1 { font-size: 1.4em; } .user-greeting-container p { font-size: 0.85em; } .membership-id { font-size: 0.75em; } .app-header { padding-bottom: 75px; } .main-content { margin-top: -60px; padding-bottom: 85px; } .nav-item span { font-size: 0.65em; } .nav-item i { font-size: 1.4em; } .modal-content { width: 95%; max-width: 95%; } .modal-header { padding: 15px 20px; h3 { font-size: 1.2em; } } .modal-close-btn { font-size: 1.6em; } .modal-tabs { padding: 0 10px; } .modal-tab-btn { font-size: 0.85em; padding: 12px 5px; } .modal-body { padding: 10px 15px; li { font-size: 0.9em; padding: 12px 5px;} .item-icon { font-size: 1.4em; width: 30px; height: 30px; } }
            .swiper-slide img { height: 130px; }
        }
        @media (min-width: 768px) { .app-container { max-width: 450px; margin: 20px auto; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.15); overflow: hidden; } .bottom-nav { max-width: 450px; left: 50%; transform: translateX(-50%); border-radius: 0 0 20px 20px; } .loading-overlay { max-width: 450px; left: 50%; transform: translateX(-50%); border-radius: 20px; } }

        /* --- Dark Mode Styles --- */
        body.dark-mode { background-color: #121212; color: #e0e0e0; } body.dark-mode .loading-overlay { background-color: rgba(18, 18, 18, 0.95); } body.dark-mode .loading-text { color: #bbb; } body.dark-mode .app-container { background-color: #121212; } body.dark-mode .app-header { box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4); } body.dark-mode .header-user-avatar img { border-color: rgba(255, 255, 255, 0.2); box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4); } body.dark-mode .header-user-avatar::after { border-color: var(--dynamic-primary-dark-color, #3c2a8a); } body.dark-mode .header-center-logo img { filter: brightness(0) invert(1) opacity(0.9) drop-shadow(0 1px 2px rgba(0,0,0,0.2)); } body.dark-mode .header-right-actions .header-icon { color: #d1c4e9; i { text-shadow: none; } } body.dark-mode .user-greeting-container p#greeting { opacity: 0.7; } body.dark-mode .user-greeting-container h1 { color: #f5f5f5; text-shadow: 0 1px 3px rgba(0,0,0,0.3); } body.dark-mode .membership-id { color: rgba(224, 224, 224, 0.75); background: rgba(0,0,0,0.3); } body.dark-mode .balance-card, body.dark-mode .service-item, body.dark-mode .product-item, body.dark-mode .news-item { background-color: #1e1e1e; color: #e0e0e0; box-shadow: 0 5px 15px rgba(0,0,0,0.4); border: 1px solid #2c2c2c; } body.dark-mode .balance-details .amount::after, body.dark-mode .service-item::after, body.dark-mode .section-header h2::before, body.dark-mode .card-separator::after { background: var(--dynamic-gradient-dark, linear-gradient(90deg, #6a5acd, #836fff)); } body.dark-mode .service-item span, body.dark-mode .balance-details .title, body.dark-mode .reward-details .title, body.dark-mode .action-item span, body.dark-mode .product-name, body.dark-mode .product-installment, body.dark-mode .news-title, body.dark-mode .news-content { color: #bbb; } body.dark-mode .product-installment strong { color: var(--dynamic-primary-color-dark, #836fff); } body.dark-mode .balance-details .amount, body.dark-mode .reward-details .points, body.dark-mode .section-header h2 { color: #f5f5f5; } body.dark-mode .balance-visibility-toggle { color: #888; } body.dark-mode .card-separator { border-color: #333; } body.dark-mode .product-image { background-color: #2a2a2a; border-bottom-color: #333; } body.dark-mode .product-action .details-btn { background: var(--dynamic-gradient-dark, linear-gradient(90deg, #6a5acd, #836fff)); } body.dark-mode .product-action .details-btn:hover { background: var(--dynamic-gradient-dark-hover, linear-gradient(90deg, #836fff, #6a5acd)); } body.dark-mode .bottom-nav { background-color: #1e1e1e; border-color: #333; box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.4); } body.dark-mode .nav-item { color: #888; } body.dark-mode .nav-item.active { color: var(--dynamic-primary-color-dark, #836fff); } body.dark-mode .nav-item i { color: #888; } body.dark-mode .nav-item.active i { color: var(--dynamic-primary-color-dark, #836fff); } body.dark-mode .nav-item:hover i, body.dark-mode .nav-item:hover span { color: var(--dynamic-primary-color-dark, #836fff); } body.dark-mode .nav-item::after { background: var(--dynamic-gradient-dark, linear-gradient(90deg, #6a5acd, #836fff)); } body.dark-mode .nav-item.active::before { background-color: var(--dynamic-primary-color-dark, #836fff); } body.dark-mode .service-item:hover span { color: var(--dynamic-primary-color-dark, #836fff); } body.dark-mode .service-item:hover .icon-wrapper i { color: var(--dynamic-primary-color-dark, #836fff); }
        body.dark-mode .action-item[data-action="pay-bill"] .icon { color: #5dade2; background-color: rgba(93, 173, 226, 0.15); }
        body.dark-mode .action-item[data-action="postpone"] .icon { color: #48c9b0; background-color: rgba(72, 201, 176, 0.15); }
        body.dark-mode .action-item[data-action="pay-off"] .icon { color: #58d68d; background-color: rgba(88, 214, 141, 0.15); }
        body.dark-mode .action-item[data-action="qr"] .icon { color: #a391ff; background-color: rgba(163, 145, 255, 0.15); }
        body.dark-mode .action-item:hover span { color: var(--dynamic-primary-color-dark, #836fff); } body.dark-mode .action-item:hover .icon { background-color: #2a2a2a; box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);}
        /* Added Dark Mode Service Icons */
        body.dark-mode .service-item[data-service="renew-contract"] i { color: #2ecc71; }
        body.dark-mode .service-item[data-service="payment-history"] i { color: #bb86fc; }
        body.dark-mode .service-item[data-service="settings"] i { color: #bdc3c7; }
        body.dark-mode .banner-carousel { box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); } body.dark-mode .modal-content { background-color: #1f1f1f; border-color: #333; } body.dark-mode .modal-header {} body.dark-mode .modal-header h3 { color: #f0f0f0; text-shadow: 0 1px 2px rgba(0,0,0,0.5); } body.dark-mode .modal-close-btn { color: rgba(220, 220, 220, 0.8); } body.dark-mode .modal-tabs { background-color: #2a2a2a; border-bottom-color: #383838; } body.dark-mode .modal-tab-btn { color: #aaa; } body.dark-mode .modal-tab-btn:hover { color: #ddd; background-color: #333; } body.dark-mode .modal-tab-btn.active { color: var(--dynamic-primary-color-dark, #836fff); border-bottom-color: var(--dynamic-primary-color-dark, #836fff); } body.dark-mode .modal-body { background-color: #1f1f1f; } body.dark-mode .modal-body li { border-bottom-color: #333; } body.dark-mode .modal-body li:hover { background-color: #282828; } body.dark-mode .modal-body #transactions-content .item-icon i.fa-arrow-down { color: #58d68d; } body.dark-mode .modal-body #transactions-content .item-icon i.fa-arrow-up { color: #f1948a; } body.dark-mode .modal-body #user-promos-content .item-icon { color: var(--dynamic-secondary-color-dark, #f5b041); } body.dark-mode .modal-body .item-title { color: #e0e0e0; } body.dark-mode .modal-body .item-description { color: #aaa; } body.dark-mode #promotionModalOverlay .item-icon[style*="#f1c40f"] { color: #f7dc6f; } body.dark-mode #promotionModalOverlay .item-icon[style*="#e74c3c"] { color: #f1948a; } body.dark-mode #promotionModalOverlay .item-icon[style*="#3498db"] { color: #85c1e9; } body.dark-mode .news-read-more { color: var(--dynamic-primary-color-dark, #a391ff); } body.dark-mode .news-read-more:hover { color: var(--dynamic-secondary-color-dark, #b8a9ff); } body.dark-mode .section-header .view-all { color: var(--dynamic-secondary-color-dark, #f5b041); } body.dark-mode .section-header .view-all:hover { color: var(--dynamic-primary-color-dark, #e67e22); } body.dark-mode .product-list { scrollbar-color: #555 #2a2a2a; } body.dark-mode .product-list::-webkit-scrollbar-track { background: #2a2a2a; } body.dark-mode .product-list::-webkit-scrollbar-thumb { background-color: #555; } body.dark-mode::-webkit-scrollbar-track { background: #2a2a2a; } body.dark-mode::-webkit-scrollbar-thumb { background: #555; }

    </style>
</head>
<body>
    <!-- PIN Screen HTML -->
    <div id="pinScreen"> <div class="pin-header-area"> <div class="pin-user-info"> <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="User Avatar"> <h2>คุณ สมศรี กีเรืองแสง</h2> </div> <p id="pinStatusMessage">กรุณากรอกรหัส PIN</p> <div class="pin-dots-container" id="pinDotsContainer"> <span class="pin-dot"></span><span class="pin-dot"></span><span class="pin-dot"></span> <span class="pin-dot"></span><span class="pin-dot"></span><span class="pin-dot"></span> </div> </div> <div class="pin-keypad-area"> <div class="pin-keypad"> <button class="pin-key" data-value="1">1<span class="key-letters"></span></button> <button class="pin-key" data-value="2">2<span class="key-letters">ABC</span></button> <button class="pin-key" data-value="3">3<span class="key-letters">DEF</span></button> <button class="pin-key" data-value="4">4<span class="key-letters">GHI</span></button> <button class="pin-key" data-value="5">5<span class="key-letters">JKL</span></button> <button class="pin-key" data-value="6">6<span class="key-letters">MNO</span></button> <button class="pin-key" data-value="7">7<span class="key-letters">PQRS</span></button> <button class="pin-key" data-value="8">8<span class="key-letters">TUV</span></button> <button class="pin-key" data-value="9">9<span class="key-letters">WXYZ</span></button> <button class="pin-key empty" disabled></button> <button class="pin-key" data-value="0">0<span class="key-letters">+</span></button> <button class="pin-key utility" id="pinDeleteKey"><i class="fas fa-delete-left"></i></button> </div> <div class="pin-actions"> <a href="#" id="pinForgotLink">ลืมรหัส PIN</a> </div> </div> </div>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay"> <lottie-player class="loading-animation" src="https://assets1.lottiefiles.com/packages/lf20_usmfx6bp.json" background="transparent" speed="1" loop autoplay></lottie-player> <div class="loading-text">กำลังเข้าสู่ระบบ...</div> </div>
    <!-- App Container -->
    <div class="app-container" id="appContainer">
        <header class="app-header animate__animated animate__fadeIn"> <div class="header-top"> <div class="header-user-avatar"> <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="User Avatar" title="โปรไฟล์ของคุณ สมศรี กีเรืองแสง"> </div> <div class="header-center-logo"> <img src="https://lh3.googleusercontent.com/d/1Z8TQQ4au9FvZwkMRONlfPuAP4ZrKydkM" alt="Bank Logo"> </div> <div class="header-right-actions"> <div class="header-icon" id="notificationBtn" title="รายการแจ้งเตือน"> <i class="fas fa-bell"></i> <span class="notification-badge" id="notificationBadge">0</span> </div> <div class="header-icon" id="closeScreenBtn" title="ปิดหน้าจอ"> <i class="fas fa-power-off"></i> </div> </div> </div> <div class="user-greeting-container"> <p id="greeting">สวัสดีตอนเช้า,</p> <h1>คุณ สมศรี กีเรืองแสง</h1> <span class="membership-id"><i class="fas fa-id-badge"></i> M-12345678</span> </div> </header>
        <main class="main-content">
            <section class="balance-card animate__animated animate__fadeInUp"> <div class="balance-info"> <div class="balance-details"> <div class="title-row"> <div class="title">ยอดเงินคงเหลือ</div> <i class="fas fa-eye balance-visibility-toggle" id="toggleBalanceVisibility" title="แสดง/ซ่อนยอดเงิน"></i> </div> <div class="amount-container"> <div class="amount" id="balanceAmount"> <span id="balanceValue">฿3,455.00</span> <span class="hidden-placeholder" id="hiddenBalancePlaceholder">******</span> </div> </div> </div> <div class="reward-details"> <div class="title">คะแนนสะสม</div> <div class="points"><i class="fas fa-gift"></i><span>307 คะแนน</span></div> </div> </div> <div class="card-separator"></div>
                 <div class="quick-actions">
                    <div class="action-item" data-action="pay-bill"> <span class="icon"><i class="fas fa-file-invoice-dollar"></i></span> <span>จ่ายบิล</span> </div>
                    <div class="action-item" data-action="postpone"> <span class="icon"><i class="fas fa-calendar-alt"></i></span> <span>เลื่อนชำระ</span> </div>
                    <div class="action-item" data-action="pay-off"> <span class="icon"><i class="fas fa-check-circle"></i></span> <span>ปิดยอด</span> </div>
                    <div class="action-item" data-action="qr"> <span class="icon"><i class="fas fa-qrcode"></i></span> <span>QR ของฉัน</span> </div>
                </div>
            </section>
            <section class="banner-carousel animate__animated animate__fadeInUp animate__delay-0.5s">
                <div class="swiper bannerSwiper">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide"> <a href="#"> <img src="https://lh3.googleusercontent.com/d/157JSEh-UMltsNAcVMbMF5uBEKbuIBrfJ" alt="Banner 1"> </a> </div>
                        <div class="swiper-slide"> <a href="#"> <img src="https://lh3.googleusercontent.com/d/1_FY--T7fD9-QgdpyX-P391ldnG1a3ibq" alt="Banner 2"> </a> </div>
                        <div class="swiper-slide"> <a href="#"> <img src="https://lh3.googleusercontent.com/d/18cYIaE6ybRaUsb_eo_4BwzGhK5XeWgQL" alt="Banner 3"> </a> </div>
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </section>
            <section class="section animate__animated animate__fadeInUp animate__delay-1s"> <div class="section-header"><h2>บริการของคุณ</h2></div>
                <div class="service-grid">
                    <div class="service-item" data-service="contract"><div class="icon-wrapper"><i class="fas fa-file-signature"></i></div><span>ข้อมูลสัญญา</span></div>
                    <div class="service-item" data-service="installment"><div class="icon-wrapper"><i class="fas fa-tablet-alt"></i></div><span>ผ่อนสินค้า</span></div>
                    <div class="service-item" data-service="refinance"><div class="icon-wrapper"><i class="fas fa-coins"></i></div><span>รีไฟแนนซ์</span></div>
                    <div class="service-item" data-service="pawn-phone"><div class="icon-wrapper"><i class="fas fa-mobile-alt"></i></div><span>จำนำมือถือ</span></div>
                    <div class="service-item" data-service="sell-phone"><div class="icon-wrapper"><i class="fas fa-exchange-alt"></i></div><span>ขายมือถือ</span></div>
                    <div class="service-item" data-service="pawn-icloud"><div class="icon-wrapper"><i class="fas fa-cloud"></i></div><span>จำนำ iCloud</span></div>
                    <div class="service-item" data-service="save-down"><div class="icon-wrapper"><i class="fas fa-piggy-bank"></i></div><span>ออมดาวน์</span></div>
                    <div class="service-item" data-service="new-item"><div class="icon-wrapper"><i class="fas fa-star"></i></div><span>สินค้ามาใหม่</span></div>
                    <div class="service-item" data-service="rent-phone"><div class="icon-wrapper"><i class="fas fa-undo"></i></div><span>เช่ามือถือ</span></div>
                    <div class="service-item" data-service="renew-contract"><div class="icon-wrapper"><i class="fas fa-handshake"></i></div><span>ต่อสัญญา</span></div>
                    <div class="service-item" data-service="payment-history"><div class="icon-wrapper"><i class="fas fa-history"></i></div><span>ประวัติชำระ</span></div>
                    <div class="service-item" data-service="settings"><div class="icon-wrapper"><i class="fas fa-cog"></i></div><span>ตั้งค่า</span></div>
                </div>
             </section>
            <section class="section news-section animate__animated animate__fadeInUp animate__delay-1s"> <div class="section-header"><h2>ข่าวสารและประกาศ</h2><a href="#" class="view-all">ดูทั้งหมด <i class="fas fa-chevron-right"></i></a></div> <div class="news-item hover-grow"> <div class="news-header"><div class="news-title"><i class="fas fa-bullhorn"></i>อัพเดทระบบใหม่!</div><div class="news-date">15 ก.ย. 66</div></div> <div class="news-content">แอป NO1Money+ เวอร์ชัน 2.0 พร้อมให้บริการแล้ว...</div><a href="#" class="news-read-more">อ่านต่อ</a> </div> <div class="news-item hover-grow"> <div class="news-header"><div class="news-title"><i class="fas fa-percentage"></i>โปรโมชั่นพิเศษ!</div><div class="news-date">10 ก.ย. 66</div></div> <div class="news-content">ส่วนลด 10% เมื่อผ่อนสินค้าใหม่กับ NO1Money+...</div><a href="#" class="news-read-more">อ่านต่อ</a> </div> </section>
            <section class="section featured-products animate__animated animate__fadeInUp animate__delay-1s"> <div class="section-header"><h2>สินค้าเด่น ผ่อนสบาย</h2><a href="#" class="view-all">ดูทั้งหมด <i class="fas fa-chevron-right"></i></a></div> <div class="product-list"> <div class="product-item hover-grow"> <div class="product-image"><img src="https://lh3.googleusercontent.com/d/1N7g2l2N1t7f2lqC0y0QyOQ-i5z9wH2oH" alt="iPhone 15 Pro"></div> <div class="product-details"><span class="product-name">iPhone 15 Pro</span><p class="product-installment">ผ่อน <strong>฿3,590</strong>/ด</p><div class="product-action"><a href="#" class="details-btn">ดูรายละเอียด</a></div></div> </div> <div class="product-item hover-grow"> <div class="product-image"><img src="https://lh3.googleusercontent.com/d/1W8S5QhA0r2f1zR7z6G3L9mO-h5P6xK0l" alt="Samsung Galaxy S24 Ultra"></div> <div class="product-details"><span class="product-name">Samsung Galaxy S24 Ultra</span><p class="product-installment">ผ่อน <strong>฿4,150</strong>/ด</p><div class="product-action"><a href="#" class="details-btn">ดูรายละเอียด</a></div></div> </div> <div class="product-item hover-grow"> <div class="product-image"><img src="https://lh3.googleusercontent.com/d/1x-D0v_hF7a5dO4uT5jS9pB-l2kR3xY1o" alt="iPad Air (M2)"></div> <div class="product-details"><span class="product-name">iPad Air (M2)</span><p class="product-installment">ผ่อน <strong>฿2,390</strong>/ด</p><div class="product-action"><a href="#" class="details-btn">ดูรายละเอียด</a></div></div> </div> <div class="product-item hover-grow"> <div class="product-image"><img src="https://lh3.googleusercontent.com/d/1V-Z5kG8sP3wN9jL1oT4xR6xS0wU7pQ0b" alt="Samsung Galaxy Tab S9"></div> <div class="product-details"><span class="product-name">Samsung Galaxy Tab S9</span><p class="product-installment">ผ่อน <strong>฿2,990</strong>/ด</p><div class="product-action"><a href="#" class="details-btn">ดูรายละเอียด</a></div></div> </div> <div class="product-item hover-grow"> <div class="product-image"><img src="https://lh3.googleusercontent.com/d/1e-Z0mK7rB1wO8iP9sT2vA4xQ5yL6wN1x" alt="Xiaomi 14"></div> <div class="product-details"><span class="product-name">Xiaomi 14</span><p class="product-installment">ผ่อน <strong>฿2,699</strong>/ด</p><div class="product-action"><a href="#" class="details-btn">ดูรายละเอียด</a></div></div> </div> </div> </section>
        </main>
        <nav class="bottom-nav"> <a href="#home" class="nav-item active" data-target="home"><i class="fas fa-home"></i><span>หน้าหลัก</span></a> <a href="#transactions" class="nav-item" data-target="transactions"><i class="fas fa-list-ul"></i><span>รายการ</span></a> <a href="#promotions" class="nav-item" data-target="promotions"><i class="fas fa-tags"></i><span>โปรโมชั่น</span></a> <a href="#card" class="nav-item" data-target="card"><i class="far fa-credit-card"></i><span>บัตร</span></a> <a href="#profile" class="nav-item" data-target="profile"><i class="far fa-user"></i><span>โปรไฟล์</span></a> </nav>
    </div>
    <!-- Modals -->
    <div class="modal-overlay" id="transactionModalOverlay"> <div class="modal-content"> <div class="modal-header"><h3><i class="fas fa-bell" style="margin-right: 8px; opacity: 0.8;"></i>รายการแจ้งเตือน</h3><button class="modal-close-btn">×</button></div> <div class="modal-tabs"><button class="modal-tab-btn active" data-tab="transactions">รายการธุรกรรม</button><button class="modal-tab-btn" data-tab="user-promos">โปรโมชั่นของคุณ</button></div> <div class="modal-body"> <div class="modal-tab-content active" id="transactions-content"><ul><li><div class="transaction-item"><span class="item-icon"><i class="fas fa-arrow-down"></i></span><div class="item-details"><div class="item-title">เงินเดือนเข้า</div><div class="item-description">จาก บริษัท ABC จำกัด - 15 ก.ย. 66 09:00</div></div><span class="item-amount income">+฿25,000.00</span></div></li><li><div class="transaction-item"><span class="item-icon"><i class="fas fa-arrow-up"></i></span><div class="item-details"><div class="item-title">ชำระค่าไฟฟ้า</div><div class="item-description">การไฟฟ้านครหลวง - 14 ก.ย. 66 14:30</div></div><span class="item-amount outcome">-฿1,250.50</span></div></li><li><div class="transaction-item"><span class="item-icon"><i class="fas fa-arrow-up"></i></span><div class="item-details"><div class="item-title">โอนเงินให้ John Doe</div><div class="item-description">เลขบัญชี xxx-x-x1234-x - 14 ก.ย. 66 10:15</div></div><span class="item-amount outcome">-฿500.00</span></div></li></ul></div> <div class="modal-tab-content" id="user-promos-content"><ul><li><div class="promotion-item"><span class="item-icon"><i class="fas fa-tag"></i></span><div class="item-details"><div class="item-title">ส่วนลดพิเศษ 10% ร้านกาแฟ</div><div class="item-description">เฉพาะสาขาใกล้บ้านคุณ (ถึงสิ้นเดือน)</div></div></div></li><li><div class="promotion-item"><span class="item-icon"><i class="fas fa-gift"></i></span><div class="item-details"><div class="item-title">คะแนนสะสม X2 เมื่อใช้จ่าย</div><div class="item-description">ทุกยอดการใช้จ่ายผ่านบัตรวันนี้</div></div></div></li></ul></div> </div> </div> </div>
    <div class="modal-overlay" id="promotionModalOverlay"> <div class="modal-content"> <div class="modal-header"><h3><i class="fas fa-star" style="margin-right: 8px; opacity: 0.8;"></i>โปรโมชั่นล่าสุด</h3><button class="modal-close-btn">×</button></div> <div class="modal-body"><ul><li><div class="promotion-item"><span class="item-icon" style="color: #f1c40f;"><i class="fas fa-star"></i></span><div class="item-details"><div class="item-title">ส่วนลด GrabFood 50%</div><div class="item-description">เมื่อจ่ายผ่านบัตรเครดิต YourBank ขั้นต่ำ 200 บาท...</div></div></div></li><li><div class="promotion-item"><span class="item-icon" style="color: #e74c3c;"><i class="fas fa-gift"></i></span><div class="item-details"><div class="item-title">ดูหนัง SF Cinema 1 ฟรี 1</div><div class="item-description">เพียงแสดงแอป YourBank ที่หน้าเคาน์เตอร์...</div></div></div></li></ul></div> </div> </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Element Refs ---
            const body=document.body, root=document.documentElement, loadingOverlay=document.getElementById('loadingOverlay'), appContainer=document.getElementById('appContainer'), pinScreen=document.getElementById('pinScreen'), pinStatusMessage=document.getElementById('pinStatusMessage'), pinDotsContainer=document.getElementById('pinDotsContainer'), pinDots=pinDotsContainer.querySelectorAll('.pin-dot'), pinKeys=document.querySelectorAll('.pin-key:not(.utility):not(.empty)'), pinDeleteKey=document.getElementById('pinDeleteKey'), pinForgotLink=document.getElementById('pinForgotLink'), appHeader=document.querySelector('.app-header'), navItems=document.querySelectorAll('.bottom-nav .nav-item'), greetingElement=document.getElementById('greeting'), toggleBalanceBtn=document.getElementById('toggleBalanceVisibility'), balanceAmountDiv=document.getElementById('balanceAmount'), balanceValueSpan=document.getElementById('balanceValue'), hiddenPlaceholderSpan=document.getElementById('hiddenBalancePlaceholder'), closeScreenBtn=document.getElementById('closeScreenBtn'), notificationBtn=document.getElementById('notificationBtn'), notificationBadge=document.getElementById('notificationBadge'), transactionModalOverlay=document.getElementById('transactionModalOverlay'), promotionNavItem=document.querySelector('.nav-item[data-target="promotions"]'), promotionModalOverlay=document.getElementById('promotionModalOverlay'), modalOverlays=document.querySelectorAll('.modal-overlay'), modalCloseBtns=document.querySelectorAll('.modal-close-btn'), modalHeaders=document.querySelectorAll('.modal-header'), transactionModal=document.getElementById('transactionModalOverlay'), modalTabBtns=transactionModal?.querySelectorAll('.modal-tab-btn'), modalTabContents=transactionModal?.querySelectorAll('.modal-tab-content');
            let isBalanceVisible=true, correctPin="123456", enteredPin="", attemptsRemaining=5, isLocked=false, pinInputLocked = false;
            const PIN_LOCK_DELAY = 250; // ms

            // --- PIN Logic ---
            const updatePinDots=()=>{pinDots.forEach((d,i)=>d.classList.toggle('active',i<enteredPin.length))};const triggerShake=()=>{pinDotsContainer.classList.remove('shake');void pinDotsContainer.offsetWidth;pinDotsContainer.classList.add('shake');if(navigator.vibrate)navigator.vibrate(200)};const resetPinEntry=(c=false)=>{enteredPin="";pinStatusMessage.textContent='กรุณากรอกรหัส PIN';pinStatusMessage.classList.remove('error','success');updatePinDots();if(isLocked||c){pinKeys.forEach(k=>k.disabled=false);pinDeleteKey?.removeAttribute('disabled');pinForgotLink?.style.setProperty('pointer-events','auto');isLocked=false;attemptsRemaining=5}};const checkPin=()=>{if(isLocked)return;pinStatusMessage.classList.remove('error','success');if(enteredPin===correctPin){pinStatusMessage.textContent='PIN ถูกต้อง กำลังเข้าสู่ระบบ...';pinStatusMessage.classList.add('success');pinKeys.forEach(k=>k.disabled=true);pinDeleteKey?.setAttribute('disabled',true);pinForgotLink?.style.setProperty('pointer-events','none');loadingOverlay?.classList.add('active');setTimeout(()=>{pinScreen?.classList.add('hidden');setTimeout(()=>{appContainer?.classList.add('visible');body.style.overflow='auto';setTimeout(()=>{loadingOverlay?.classList.remove('active');createConfetti();initializeAppFeatures()},500)},400)},300)}else{attemptsRemaining--;triggerShake();setTimeout(()=>{enteredPin="";updatePinDots();if(attemptsRemaining>0){pinStatusMessage.textContent=`รหัส PIN ไม่ถูกต้อง (${attemptsRemaining} ครั้ง)`;pinStatusMessage.classList.add('error')}else{isLocked=true;pinStatusMessage.textContent='ป้อนรหัสผิดเกินจำนวนครั้ง';pinStatusMessage.classList.add('error');pinKeys.forEach(k=>k.disabled=true);pinDeleteKey?.setAttribute('disabled',true);pinForgotLink?.style.setProperty('pointer-events','none')}pinInputLocked=false},500)}};
            pinKeys.forEach(k=>k.addEventListener('click',()=>{if(isLocked||pinInputLocked||enteredPin.length>=6)return;pinInputLocked=true;enteredPin+=k.dataset.value;updatePinDots();if(pinStatusMessage.classList.contains('error')){}if(enteredPin.length===6){setTimeout(checkPin,100)}else{setTimeout(()=>{pinInputLocked=false},PIN_LOCK_DELAY)}}));pinDeleteKey?.addEventListener('click',()=>{if(isLocked||pinInputLocked||enteredPin.length===0)return;pinInputLocked=true;enteredPin=enteredPin.slice(0,-1);updatePinDots();if(pinStatusMessage.classList.contains('error')||pinStatusMessage.classList.contains('success')){resetPinEntry()}setTimeout(()=>{pinInputLocked=false},PIN_LOCK_DELAY)});pinForgotLink?.addEventListener('click',e=>{e.preventDefault();if(isLocked)return;alert('ฟังก์ชัน "ลืมรหัส PIN" (ยังไม่ได้พัฒนา)')});

            // --- Theme ---
            const themes = { morning: { gradient: 'linear-gradient(135deg, #87CEEB 0%, #ADD8E6 50%, #FFB6C1 100%)', gradientDark: 'linear-gradient(135deg, #2c3e50 0%, #34495e 50%, #4a3a61 100%)', primary: '#87CEEB', secondary: '#FFB6C1', primaryDark: '#75a3bd', secondaryDark: '#c78a95', primaryDarker: '#2c3e50', gradientHoverDark: 'linear-gradient(90deg, #34495e, #2c3e50)', }, afternoon: { gradient: 'linear-gradient(135deg, #FF8C00 0%, #FFA07A 50%, #FF69B4 100%)', gradientDark: 'linear-gradient(135deg, #8B4513 0%, #A0522D 50%, #800080 100%)', primary: '#FF8C00', secondary: '#FF69B4', primaryDark: '#cc7000', secondaryDark: '#b34d90', primaryDarker: '#8B4513', gradientHoverDark: 'linear-gradient(90deg, #A0522D, #8B4513)', }, evening: { gradient: 'linear-gradient(135deg, #483D8B 0%, #8A2BE2 50%, #BA55D3 100%)', gradientDark: 'linear-gradient(135deg, #1a1a2e 0%, #2a2a4e 50%, #4a235a 100%)', primary: '#8A2BE2', secondary: '#BA55D3', primaryDark: '#7b25c9', secondaryDark: '#9b47b0', primaryDarker: '#1a1a2e', gradientHoverDark: 'linear-gradient(90deg, #2a2a4e, #1a1a2e)', } };
            const setDynamicTheme = () => { const h=new Date().getHours(); let tod='evening'; if(h>=5&&h<12)tod='morning';else if(h>=12&&h<18)tod='afternoon'; const ct=themes[tod]; root.style.setProperty('--dynamic-gradient',ct.gradient); root.style.setProperty('--dynamic-gradient-dark',ct.gradientDark); root.style.setProperty('--dynamic-gradient-dark-hover',ct.gradientHoverDark); root.style.setProperty('--dynamic-primary-color',ct.primary); root.style.setProperty('--dynamic-secondary-color',ct.secondary); root.style.setProperty('--dynamic-primary-color-dark',ct.primaryDark); root.style.setProperty('--dynamic-secondary-color-dark',ct.secondaryDark); root.style.setProperty('--dynamic-primary-dark-color',ct.primaryDarker); if(appHeader)appHeader.style.backgroundColor=ct.gradient; modalHeaders.forEach(hdr=>hdr.style.background=ct.gradient); const sid='dynamic-styles'; let se=document.getElementById(sid); if(!se){se=document.createElement('style');se.id=sid;document.head.appendChild(se)} se.textContent=` .header-user-avatar::after { border-color: ${ct.primary}; } body.dark-mode .header-user-avatar::after { border-color: ${ct.primaryDarker}; } .pin-dot.active { background-color: ${ct.primary}; border-color: ${ct.primary}; } body.dark-mode .pin-dot.active { background-color: ${ct.primaryDark}; border-color: ${ct.primaryDark}; } #pinForgotLink { color: ${ct.primary}; } #pinForgotLink:hover { color: ${ct.secondary}; } body.dark-mode #pinForgotLink { color: ${ct.primaryDark}; } body.dark-mode #pinForgotLink:hover { color: ${ct.secondaryDark}; } .balance-details .amount::after, .service-item::after, .section-header h2::before, .card-separator::after { background: ${ct.gradient}; } body.dark-mode .balance-details .amount::after, body.dark-mode .service-item::after, body.dark-mode .section-header h2::before, body.dark-mode .card-separator::after { background: ${ct.gradientDark}; } .service-item:hover span, .product-item:hover .product-name, .news-read-more { color: ${ct.primary}; } body.dark-mode .service-item:hover span, body.dark-mode .product-item:hover .product-name, body.dark-mode .news-read-more { color: ${ct.primaryDark}; } .product-installment strong { color: ${ct.primary}; } body.dark-mode .product-installment strong { color: ${ct.primaryDark}; } .product-action .details-btn { background: ${ct.gradient}; } .product-action .details-btn:hover { background: linear-gradient(90deg, ${ct.secondary}, ${ct.primary}); } body.dark-mode .product-action .details-btn { background: ${ct.gradientDark}; } body.dark-mode .product-action .details-btn:hover { background: ${ct.gradientHoverDark}; } .nav-item.active, .nav-item.active i { color: ${ct.primary}; } body.dark-mode .nav-item.active, body.dark-mode .nav-item.active i { color: ${ct.primaryDark}; } .nav-item:hover i, .nav-item:hover span { color: ${ct.primary}; } body.dark-mode .nav-item:hover i, body.dark-mode .nav-item:hover span { color: ${ct.primaryDark}; } .nav-item::after { background: ${ct.gradient}; } body.dark-mode .nav-item::after { background: ${ct.gradientDark}; } .nav-item.active::before { background-color: ${ct.primary}; } body.dark-mode .nav-item.active::before { background-color: ${ct.primaryDark}; } .modal-tab-btn.active { color: ${ct.primary}; border-bottom-color: ${ct.primary}; } body.dark-mode .modal-tab-btn.active { color: ${ct.primaryDark}; border-bottom-color: ${ct.primaryDark}; } .section-header .view-all { color: ${ct.secondary}; } .section-header .view-all:hover { color: ${ct.primary}; } body.dark-mode .section-header .view-all { color: ${ct.secondaryDark}; } body.dark-mode .section-header .view-all:hover { color: ${ct.primaryDark}; } .swiper-pagination-bullet-active { background-color: ${ct.primary}; } body.dark-mode .swiper-pagination-bullet-active { background-color: ${ct.primaryDark}; } body.dark-mode .service-item:hover .icon-wrapper i { color: ${ct.primaryDark}; } .action-item:hover span { color: ${ct.primary}; } body.dark-mode .action-item:hover span { color: ${ct.primaryDark}; } body.dark-mode .action-item:hover .icon { background-color: #2a2a2a; box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);} `; };

            // --- App Initialization ---
            const initializeAppFeatures = () => { setGreeting(); updateBalanceVisibility(); initializeSwiper(); addAppEventListeners(); applyThemeMode(initialThemeMode); document.querySelectorAll('.main-content .animate__animated').forEach(el => el.style.visibility = 'visible'); if (notificationBadge) { const targetValue = 5; if (targetValue > 0) { notificationBadge.style.display = 'flex'; animateValue(notificationBadge, 0, targetValue, 800); } else { notificationBadge.style.display = 'none'; } } window.addEventListener('scroll', handleScrollParallax); };
            // --- Swiper Init ---
            const initializeSwiper = () => { try { const bannerSwiper = new Swiper('.bannerSwiper', { loop: true, autoplay: { delay: 4000, disableOnInteraction: false }, pagination: { el: '.swiper-pagination', clickable: true, dynamicBullets: true }, slidesPerView: 1, spaceBetween: 0, effect: 'fade', fadeEffect: { crossFade: true }, }); } catch (e) { console.error("Swiper Init Error:", e); } };
            // --- App Event Listeners ---
            const addAppEventListeners = () => { navItems.forEach(item => { item.addEventListener('click', (e) => { if (item.getAttribute('href')?.startsWith('#')) e.preventDefault(); const target = item.dataset.target; if (target === 'promotions') openModal(promotionModalOverlay); if(target !== 'promotions'){ navItems.forEach(i => i.classList.remove('active')); item.classList.add('active'); } else { if(!document.querySelector('.nav-item[data-target="home"].active')) document.querySelector('.nav-item[data-target="home"]')?.classList.add('active'); } }); }); toggleBalanceBtn?.addEventListener('click', (event) => { isBalanceVisible = !isBalanceVisible; updateBalanceVisibility(); }); closeScreenBtn?.addEventListener('click', (event) => { alert('ปิดหน้าจอ (จำลอง)'); }); notificationBtn?.addEventListener('click', (event) => { openModal(transactionModalOverlay); notificationBadge?.classList.remove('badge-animate'); notificationBadge?.classList.add('badge-no-animate'); }); modalCloseBtns.forEach(btn => btn.addEventListener('click', (event) => handleModalClose(event, btn))); modalOverlays.forEach(overlay => overlay.addEventListener('click', (event) => { if(event.target === overlay) handleModalClose(event, overlay); })); modalTabBtns?.forEach(button => button.addEventListener('click', (event) => { switchTab(button.dataset.tab); })); const clickableElements = appContainer?.querySelectorAll( '.action-item, .service-item, .news-item, .product-item, .nav-item, .modal-tab-btn, .news-read-more, .view-all, .product-action .details-btn, .header-icon, .balance-visibility-toggle, .swiper-slide a' ); clickableElements?.forEach(element => element.addEventListener('click', function(event) { /* No ripple */ })); addTouchFeedbackListeners(appContainer); };
            // --- Helper Functions ---
            const setGreeting = () => { const h = new Date().getHours(); let gt = "สวัสดี"; if (h >= 5 && h < 12) gt = "สวัสดีตอนเช้า,"; else if (h >= 12 && h < 18) gt = "สวัสดีตอนบ่าย,"; else gt = "สวัสดีตอนค่ำ,"; if (greetingElement) greetingElement.textContent = gt; }; const applyThemeMode = (themeMode) => { document.body.classList.toggle('dark-mode', themeMode === 'dark'); setDynamicTheme(); }; const updateBalanceVisibility = () => { if (!balanceValueSpan || !hiddenPlaceholderSpan || !toggleBalanceBtn || !balanceAmountDiv) return; const iv = isBalanceVisible; balanceValueSpan.style.display = iv ? 'inline' : 'none'; hiddenPlaceholderSpan.style.display = iv ? 'none' : 'inline'; toggleBalanceBtn.classList.toggle('fa-eye', iv); toggleBalanceBtn.classList.toggle('fa-eye-slash', !iv); balanceAmountDiv.classList.toggle('hidden', !iv); toggleBalanceBtn.title = iv ? "ซ่อนยอดเงิน" : "แสดงยอดเงิน"; }; const openModal = (mo) => { if (!mo) return; document.body.classList.add('modal-open'); mo.classList.add('active'); const mc = mo.querySelector('.modal-content'); if (mc) { mc.style.visibility = 'visible'; mc.querySelector('.modal-body')?.scrollTo(0, 0); } if (mo === transactionModalOverlay) resetTabs(); }; const closeModal = (mo) => { if (!mo) return; document.body.classList.remove('modal-open'); const mc = mo.querySelector('.modal-content'); if (mc) mc.addEventListener('animationend', () => { if (!mo.classList.contains('active')) mc.style.visibility = 'hidden'; }, { once: true }); mo.classList.remove('active'); }; const handleModalClose = (event, element) => { const mo = element.closest('.modal-overlay'); if(!mo) return; closeModal(mo); if (mo === transactionModalOverlay) { notificationBadge?.classList.remove('badge-no-animate'); if(parseInt(notificationBadge?.textContent || '0') > 0) notificationBadge?.classList.add('badge-animate'); } if (mo === promotionModalOverlay) { document.querySelector('.nav-item[data-target="home"]')?.classList.add('active'); promotionNavItem?.classList.remove('active'); } }; const switchTab = (tid) => { if (!modalTabBtns || !modalTabContents) return; modalTabBtns.forEach(btn => btn.classList.toggle('active', btn.dataset.tab === tid)); modalTabContents.forEach(content => content.classList.toggle('active', content.id === `${tid}-content`)); }; const resetTabs = () => { if (modalTabBtns && modalTabContents) switchTab('transactions'); };
            function createConfetti() { const clrs=['#f00','#0f0','#00f','#ff0','#f0f','#0ff'], cont=document.querySelector('body'), ssId='confetti-animation-style'; if (!document.getElementById(ssId)) { const s=document.createElement('style');s.id=ssId;s.textContent=`@keyframes fall{to{transform:translateY(100vh) rotate(720deg);opacity:0}}`;document.head.appendChild(s); } for(let i=0;i<50;i++){ const c=document.createElement('div');c.classList.add('confetti');const sz=Math.random()*10+5;c.style.width=`${sz}px`;c.style.height=`${sz}px`;c.style.backgroundColor=clrs[Math.floor(Math.random()*clrs.length)];c.style.left=`${Math.random()*100}vw`;c.style.top='-20px';c.style.opacity='1';c.style.transform=`rotate(${Math.random()*360}deg)`;const dur=Math.random()*3+2,del=Math.random()*1;c.style.animation=`fall ${dur}s linear ${del}s forwards`;cont.appendChild(c);setTimeout(()=>c.remove(),(dur+del+.5)*1e3);}}
            function addTouchFeedbackListeners(container=document){ const btns=container.querySelectorAll('button:not(.pin-key), [role="button"], .action-item, .service-item, .nav-item, .news-read-more, .view-all, .header-icon, .balance-visibility-toggle, .product-action .details-btn, .swiper-slide a, .modal-close-btn, .modal-tab-btn');btns.forEach(b=>{b.style.touchAction='manipulation';b.style.cursor='pointer';b.addEventListener('touchstart',e=>{if(e.touches.length>1)e.preventDefault()},{passive:!1});const a=()=>b.classList.add('active-touch'),r=()=>b.classList.remove('active-touch');b.addEventListener('touchstart',a,{passive:!0});b.addEventListener('touchend',r);b.addEventListener('touchcancel',r);b.addEventListener('mousedown',a);b.addEventListener('mouseup',r);b.addEventListener('mouseleave',r)})}
            function animateValue(obj, start, end, duration) { if(!obj) return; let startTimestamp = null; const step = (timestamp) => { if (!startTimestamp) startTimestamp = timestamp; const progress = Math.min((timestamp - startTimestamp) / duration, 1); obj.innerHTML = Math.floor(progress * (end - start) + start); if (progress < 1) { window.requestAnimationFrame(step); } else { obj.innerHTML = end; if (end > 0) obj.classList.add('badge-animate'); } }; obj.classList.remove('badge-animate'); window.requestAnimationFrame(step); }
            const handleScrollParallax = () => { const scrollY = window.scrollY; if (appHeader) appHeader.style.backgroundPositionY = `${scrollY * 0.4}px`; };
            const storedThemeMode = localStorage.getItem('themeMode'); const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches; const initialThemeMode = storedThemeMode ? storedThemeMode : (prefersDark ? 'dark' : 'light');
            pinKeys.forEach(b=>{b.addEventListener('mousedown',()=>{b.style.transform = 'translateY(1px)';}); b.addEventListener('mouseup',()=>{b.style.transform = 'translateY(0)';}); b.addEventListener('mouseleave',()=>{b.style.transform = 'translateY(0)';}); b.addEventListener('touchstart',()=>{b.style.transform = 'translateY(1px)';},{passive:true}); b.addEventListener('touchend',()=>{b.style.transform = 'translateY(0)';})});
            setDynamicTheme(); setInterval(setDynamicTheme, 3600000);

        });
    </script>

</body>
</html>